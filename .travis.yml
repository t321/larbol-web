sudo: true
dist: trusty
env:
  global:
  - secure: VresHblOxw9bRkopP6cmvorEysHI8OCsivai25kLcbmfwwgjIk2hGpikrxYYiO6y2HTNC/buFCQTk10cZWI5trqi5F4FyKbkrW/3znsGjPsU7tklWOGP7GdRFEjSm3MUcw9bc+G1UGTK8fplij3pmKRGpGRc2WQu8VNrE5SazXS+3tniSD3deAYklgrD6hNmrEHIxLxDLlX6VDvA4F3AZZ7uDptz+aYQWQyTcAOmKMMDoBE0+dD5pQYygryhrLePpheqVG0Yn2LhBft4AS4/t/I3pR4DXgbAbn19UQ/oGSgdVUeqr1lCxoy06Y/LqCAsvWcxcmCnL9WX3Aeua1rdbjW7gwweYNlc1XcVt20nDJETDsSaioPULbUAy8rCXtiIZ2lgaMt/A4QKg6DFkonb8oWa0u0H+dDjVA3Gtb9GOQOQ4F3RK0gvahSOOLVFDS7yWseUruodXILdTCcJms/Tu0xUcqXbgllp0zbP069IL9qCEKqTKRp/AdtZvVcjUNzLPInSnkMx7nbkT9MAQhRU6n75Wyeh0JzQHneqc9BEOptCIZUBvGVT8Y8OelZWKWLWd4FsUXSTyRAcYPNqOBuLrWHbmNQ/6WyB0RMLzLgTTJJCAkElel4Icz4O7hWwBecSbtSleblqZ8XiexxJ6DaE0loovwIUsGz5shgYWn1sYn8=
  - secure: YVfSRKhUAFJxbUQh8IMokT+W5sLjb3ok0Cke5TvFKQC9Irdj+tIHd4xAfGBl9uHcJeU8a2iQ+VHosM5oivnLbRS8nPRals9I7xQKfHybTA7kabzOP/nQNdTq9GwNl2oJ8G1Zgpdpu5J26OTTJufpJhowJHtOtNrGIXLtrtxTjFUWDVzdKAj//nedT+fAh+0+8i4+Vofh+Ku8G1EWciuJGlyRPZSznkWZza4/2yIDkCzi+3zBNESySqvoZ0MZG2QhMgpx6o/B3m9Wr9P8xurw5IlQW+2qXWZVas/kF4t+LWrrovyk3zSf/C6RLb8SQxwcJ51/aWCzib3pQhngLYhgVI/1Cup6spvY14Dtg6LnJbJthEhSL658VDBbqOrqJHdpAleJfwvnCBDEvaa1o4ahmcPP6pd9xurL3jtje/RH8va+6pSGq55H2Y7MTkfpzXILwjKgslOIWguiWLX0wcHNUStKx7B5cuX+UmAMuvxnr3NZ3DHGY+ajj2dJqMHBjd6/kB7WgmbsSHo8qpbhal8yYAVCzX0veP7rIsfi5loA2UawcnyU5oNxf+AxkIN58WXnauikpNfh9f+3v9x5DdeQXzjeAOArqDroUElXzyilQh5DCvF0m1jV/flZK/IitvNvrp1X5AXIjEAbmGr88N3d3N0ge50Y8i3wZ4xrcOL4kfg=
  - secure: mzJ+7k7IdW6Z3GPG4oibauXHpNdjM/IjlrgX++oVSB8qvNFcIqfdyWnZEDGZooUTDqWkXk8k2ktyrUt9Z3+8lF+kQe2z4YFVmskzKIxDts+i33eBq3JU8V3SoPyxWYGOI7tiGm0leyUoyfn/IhUkM/jp5v1MqpbPWzqU0ajI0BrVaYPa6Rejc1HVaQzlICx5L/MhtwmsVpEs3sL8D7Qu806jADnuladdPXTMPa5ghsSFUUDzcBa18LUM5Srzw787MFWQzvkQhILsl1/a+PFl+wAh5ONsT4+UyTu3hzSVUdMl3R/35VePqz3DmgzG47bEYjCkpmPiVBkLeQYp+gPvspTXLxARR7EcMKfHzWw/G6SrgCd3WGt4hph/rUFPXwgHn/PrkAhFLpyaGNR5x4us8SIO7bcDMqmTOLaP3I+CwPgRtoKhldR0Ar+MMTh+bw0rO9/b/KQBcAwsiDjyghIDFcOlt11G/nxgJ5g/IljHcDnLCNo1PhJFCQDUW8AsBsfkSzB/El3Jropm00zOpOvxxGgRjHOLT5C5WFNz+AnnYQK1IpuhMpJoEiaowwAjWrrkyskZ35T85yi6Kib6eadOf6VITavk7ucs/A2Ac/GyJmFqECE6e/lWvMwKF41jqqqFefI0pfOcBEC9oAmX7q+m4Z0pDP4z51aoDwu1D0JJCsM=
  - secure: OjAqqlKepaeSLc+d0f88SUf6sTXREc5Ba5ZPlHfJCj0OfmoPRccJrl6POFppQOAcyyk0Bq9HeCqcnKY7iTbOaD51eEBjm54z95xwZ8OTdoaR+jYLKecUqvALAm2mmttUSZmRDpt0x+INkzpAmJctxa06P6HtOepZL5dlhVP4H7c6C0RbmFWk0VVrJou8DKVW6ot5aFbfFGbRbHfhF4m4LeEr6S9xI9Go6pJd2pNoZfvlKUr/58WfLzFOHe/POI9tPVmEeqdGV6g/P3eBlPLNCJvZorsnhBkv8FSa+JvsvF+KJVmjhjTBCReMuHGhH2didZLSD22/Zqb8YCKURxhbKPF13pAWigN4z2w9R4WEfrsQaRlKVRKxhVjRe4zf7ze70nL36fSNmyjAvgA9W5U0QxU5xm8NOOHltvqHeL2C0NbY2MUqZ2XQ0GkSsIhjbKrLscblb10Dk8+2OpL/bjzepszI2s0XOuQZui7yVGLmhh2pMgp4P0q4lDhC9868RHL0E+Nw93DHegGJtX2DuillgUrSozSXOHkPJZwLL4eUrErmnKS3xDtpIq8NB4CWA/tV6jJfz+eVEQ0roe1R3aheNsE+j+46Y8M00Ic3X9fu95ek5ALqo57uOUn579UIIW88znWhHiHkWMOkkS0/ZDJL/uPQWq+51mt9b9Ci2Q8kzF8=
services:
- docker
install:
- sudo apt-get --yes install snapd
- sudo snap install hugo
script:
- "/snap/bin/hugo"
after_success:
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH
  ; fi`
- docker build -f Dockerfile -t $DOCKER_REPO:$COMMIT .
- docker tag $DOCKER_REPO:$COMMIT $DOCKER_REPO:$TAG
- docker tag $DOCKER_REPO:$COMMIT $DOCKER_REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $DOCKER_REPO
